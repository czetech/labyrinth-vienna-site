---
import BaseLayout from "~/layouts/BaseLayout.astro";
import { getCollection, getEntry, render } from "astro:content";
import path from "pathe";
import ContentImage from "~/components/ContentImage.astro";
import Markdown from "~/components/Markdown.astro";

const { seminar } = Astro.props;

const teacher = await getEntry(
  "teachers",
  path.basename(seminar.data.teacher, ".yaml"),
);

const { Content } = await render(seminar);

export const getStaticPaths = async () => {
  return (await getCollection("seminars")).map((seminar) => ({
    params: { name: seminar.id },
    props: { seminar },
  }));
};
---

<BaseLayout>
  <article class="max-w-192 px-4">
    <div class="mb-8 grid grid-cols-2 gap-x-4 md:gap-x-8">
      <ContentImage
        path={teacher.data.image}
        class="max-h-64 rounded-2xl object-cover"
      />
      <div class="flex flex-col gap-y-2">
        <h1 class="font-serif text-xl md:text-3xl">
          <span class="font-bold uppercase">{seminar.data.mainTitle}</span>
          <span>{seminar.data.additionalTitle}</span>
        </h1>
        <span class="md:text-lg">with</span>
        <a
          href={path.join("/teachers", teacher.id)}
          class="font-serif text-lg font-bold underline md:text-2xl"
          >{teacher.data.name}</a
        >
      </div>
    </div>
    <div class="markdown text-justify font-serif text-lg tracking-wide">
      <Content content={seminar} />
    </div>
  </article>
</BaseLayout>
